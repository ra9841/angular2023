{"ast":null,"code":"import { HttpErrorResponse } from '@angular/common/http';\nimport { tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class InterceptorService {\n  constructor(router) {\n    this.router = router;\n  }\n  intercept(req, next) {\n    let clonedRequest = req.clone({\n      setHeaders: {\n        'Authorization': this.getToken(),\n        'emaila': 'nagen@gmail.com'\n      }\n    });\n    return next.handle(clonedRequest).pipe(tap(() => {\n      // to fix solar error\n    }, err => this.redirectToLogin(err)));\n  }\n  getToken() {\n    return 'Bearer ' + sessionStorage.getItem('Authorization') || '';\n  }\n  redirectToLogin(err) {\n    if (err instanceof HttpErrorResponse) {\n      if (err.status === 401) {\n        this.router.navigate(['/login']);\n      }\n      if (err.status === 403) {\n        //hey! your are not authorized to delete this record!!!!\n        this.router.navigate(['/login']);\n      }\n      if (err.status === 500) {\n        this.router.navigate(['/login']);\n      }\n    }\n  }\n}\nInterceptorService.ɵfac = function InterceptorService_Factory(t) {\n  return new (t || InterceptorService)(i0.ɵɵinject(i1.Router));\n};\nInterceptorService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: InterceptorService,\n  factory: InterceptorService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["HttpErrorResponse","tap","InterceptorService","constructor","router","intercept","req","next","clonedRequest","clone","setHeaders","getToken","handle","pipe","err","redirectToLogin","sessionStorage","getItem","status","navigate","i0","ɵɵinject","i1","Router","factory","ɵfac","providedIn"],"sources":["C:\\Users\\rabin\\OneDrive\\Desktop\\pranayaAngularProject\\angular2023\\src\\app\\services\\interceptor.service.ts"],"sourcesContent":["import { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Observable, tap } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InterceptorService implements HttpInterceptor {\r\n\r\n  constructor(private router:Router) { }\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    let clonedRequest=req.clone({\r\n      setHeaders:{\r\n        'Authorization':this.getToken(),\r\n         'emaila' :'nagen@gmail.com'\r\n      }\r\n     \r\n      \r\n    });\r\n \r\n    return next.handle(clonedRequest).pipe(\r\n      tap(\r\n        () => {\r\n          // to fix solar error\r\n        },\r\n        (err: any) => this.redirectToLogin(err)\r\n      )\r\n    );\r\n   }\r\n\r\n  public getToken(){\r\n    return 'Bearer ' + sessionStorage.getItem('Authorization') || '';\r\n  }\r\n\r\n  redirectToLogin(err: any) {\r\n\r\n    if (err instanceof HttpErrorResponse) {\r\n      if (err.status === 401) {\r\n       this.router.navigate(['/login']);\r\n      }\r\n      if (err.status === 403) {\r\n        //hey! your are not authorized to delete this record!!!!\r\n        this.router.navigate(['/login']);\r\n      }\r\n      if (err.status === 500) {\r\n        this.router.navigate(['/login']);\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n \r\n}\r\n"],"mappings":"AAAA,SAASA,iBAAiB,QAA8D,sBAAsB;AAG9G,SAAqBC,GAAG,QAAQ,MAAM;;;AAKtC,OAAM,MAAOC,kBAAkB;EAE7BC,YAAoBC,MAAa;IAAb,KAAAA,MAAM,GAANA,MAAM;EAAW;EACrCC,SAASA,CAACC,GAAqB,EAAEC,IAAiB;IAChD,IAAIC,aAAa,GAACF,GAAG,CAACG,KAAK,CAAC;MAC1BC,UAAU,EAAC;QACT,eAAe,EAAC,IAAI,CAACC,QAAQ,EAAE;QAC9B,QAAQ,EAAE;;KAId,CAAC;IAEF,OAAOJ,IAAI,CAACK,MAAM,CAACJ,aAAa,CAAC,CAACK,IAAI,CACpCZ,GAAG,CACD,MAAK;MACH;IAAA,CACD,EACAa,GAAQ,IAAK,IAAI,CAACC,eAAe,CAACD,GAAG,CAAC,CACxC,CACF;EACF;EAEMH,QAAQA,CAAA;IACb,OAAO,SAAS,GAAGK,cAAc,CAACC,OAAO,CAAC,eAAe,CAAC,IAAI,EAAE;EAClE;EAEAF,eAAeA,CAACD,GAAQ;IAEtB,IAAIA,GAAG,YAAYd,iBAAiB,EAAE;MACpC,IAAIc,GAAG,CAACI,MAAM,KAAK,GAAG,EAAE;QACvB,IAAI,CAACd,MAAM,CAACe,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;MAEjC,IAAIL,GAAG,CAACI,MAAM,KAAK,GAAG,EAAE;QACtB;QACA,IAAI,CAACd,MAAM,CAACe,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;MAElC,IAAIL,GAAG,CAACI,MAAM,KAAK,GAAG,EAAE;QACtB,IAAI,CAACd,MAAM,CAACe,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;;EAKtC;;AA3CWjB,kBAAkB,C;mBAAlBA,kBAAkB,EAAAkB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA;AAAA;AAAlBrB,kBAAkB,C;SAAlBA,kBAAkB;EAAAsB,OAAA,EAAlBtB,kBAAkB,CAAAuB,IAAA;EAAAC,UAAA,EAFjB;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}